<%@ page language="java" contentType="text/html; charset=UTF-8"
pageEncoding="UTF-8"%>

<%@ page  import="Problem.ProblemDTO, javax.servlet.http.HttpServlet, javax.servlet.http.HttpServletRequest" %>
<%
	ProblemDTO prodto = (ProblemDTO)request.getAttribute("problem");
	//UserDTO userdto = (UserDTO)request.getAttribute("user"); 유저 정보를 받는다.
	int problemNum;
	int studyNum;
	String problemName;
	String problemContent;
	if(prodto != null)
	{
		if(prodto.getProblemName()!=null)
			problemName = prodto.getProblemName();
		else
			problemName = "";
		if(prodto.getProblemContent()!=null)
			problemContent = prodto.getProblemContent();
		else
			problemContent = "";
		problemNum = prodto.getProblemNum1();
		studyNum = prodto.getStudyNum();
	}
	else
	{
		studyNum = -1;
		problemName = "";
		problemContent = "";
		problemNum = 1;
	}
%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content = text/html; charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<h2><%= problemName %></h2></br>
	<textarea rows="15" cols="80" value = <%= problemContent %>></textarea>
	<form action = "Delete.do"><!-- 문제를 삭제하기 위한 form -->
		<input type = "text" name = "problemNum" id = "problemNum1" style = "display : none" value = "<%= problemNum %>">
		<!-- 유저 정보를 받는 보이지 않는 input태그를 생성한다. -->
		<input type = "button" value = "삭제하기"><!-- 누르면 유저가 작성자인지 판별 후, 아니라면 작성자만이 문제를 삭제할 수 있다는 메시지 출력, 작성자면 삭제, 출력 화면으로 이동 -->
	</form>
	<form action = "Answer.do">
		<input type = "text" name = "problemNum" id = "problemNum" style = "display : none" value = "<%= problemNum %>">
		<input type = "submit" value = "문제 풀기">
	</form>
	<form action = "list.do">
		<input type = "text" name = "studyNum" id = "studyNum" style = "display : none" value = "<%= studyNum %>">
		<input type = "submit" value = "문제 풀기">
	</form>
	<script>
		function doAnswer(a){
			var c = a.parentNode.parentNode.children[0].innerText;
			var f = document.getElementById("problemNum");
			f.value ="" + c;
			f.parentNode.submit();
		}
	</script>
	<a onclick = "document.getElementById('write').submit();">글쓰기</a>
</body>
</html>